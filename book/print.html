<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Intermodal</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="custom.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Intermodal</a></li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">1.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="commands.html"><strong aria-hidden="true">2.</strong> Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/imdl.html"><strong aria-hidden="true">2.1.</strong> imdl</a></li><li class="chapter-item expanded "><a href="commands/imdl-completions.html"><strong aria-hidden="true">2.2.</strong> imdl completions</a></li><li class="chapter-item expanded "><a href="commands/imdl-torrent.html"><strong aria-hidden="true">2.3.</strong> imdl torrent</a></li><li class="chapter-item expanded "><a href="commands/imdl-torrent-create.html"><strong aria-hidden="true">2.4.</strong> imdl torrent create</a></li><li class="chapter-item expanded "><a href="commands/imdl-torrent-link.html"><strong aria-hidden="true">2.5.</strong> imdl torrent link</a></li><li class="chapter-item expanded "><a href="commands/imdl-torrent-piece-length.html"><strong aria-hidden="true">2.6.</strong> imdl torrent piece-length</a></li><li class="chapter-item expanded "><a href="commands/imdl-torrent-show.html"><strong aria-hidden="true">2.7.</strong> imdl torrent show</a></li><li class="chapter-item expanded "><a href="commands/imdl-torrent-stats.html"><strong aria-hidden="true">2.8.</strong> imdl torrent stats</a></li><li class="chapter-item expanded "><a href="commands/imdl-torrent-verify.html"><strong aria-hidden="true">2.9.</strong> imdl torrent verify</a></li></ol></li><li class="chapter-item expanded "><a href="bittorrent.html"><strong aria-hidden="true">3.</strong> Bittorrent</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="bittorrent/piece-length-selection.html"><strong aria-hidden="true">3.1.</strong> Piece Length Selection</a></li><li class="chapter-item expanded "><a href="bittorrent/bep-support.html"><strong aria-hidden="true">3.2.</strong> BEP Support</a></li><li class="chapter-item expanded "><a href="bittorrent/metainfo-utilities.html"><strong aria-hidden="true">3.3.</strong> Metainfo Utilities</a></li><li class="chapter-item expanded "><a href="bittorrent/distributing-large-data-sets.html"><strong aria-hidden="true">3.4.</strong> Distributing Large Data Sets</a></li><li class="chapter-item expanded "><a href="bittorrent/udp-tracker-protocol.html"><strong aria-hidden="true">3.5.</strong> UDP Tracker Protocol</a></li></ol></li><li class="chapter-item expanded "><a href="references.html"><strong aria-hidden="true">4.</strong> References</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="references/bittorrent.html"><strong aria-hidden="true">4.1.</strong> BitTorrent</a></li><li class="chapter-item expanded "><a href="references/metadata.html"><strong aria-hidden="true">4.2.</strong> Metadata</a></li><li class="chapter-item expanded "><a href="references/cryptography.html"><strong aria-hidden="true">4.3.</strong> Cryptography</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Intermodal</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/casey/intermodal" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="intermodal-a-40-shipping-container-for-the-internet"><a class="header" href="#intermodal-a-40-shipping-container-for-the-internet">Intermodal: A 40’ shipping container for the Internet</a></h1>
<p>Intermodal is a user-friendly and featureful command-line BitTorrent metainfo utility for Linux, Windows, and macOS.</p>
<p>Project development is hosted on <a href="https://github.com/casey/intermodal">GitHub</a>.</p>
<p>The binary is called <code>imdl</code>:</p>
<pre><code class="language-sh">$ imdl --help
</code></pre>
<p>BitTorrent metainfo related functionality is under the <code>torrent</code> subcommand:</p>
<pre><code class="language-sh">$ imdl torrent --help
</code></pre>
<p>Intermodal can be used to create <code>.torrent</code> files:</p>
<pre><code class="language-sh">$ imdl torrent create --input foo
</code></pre>
<p>Print information about existing <code>.torrent</code> files:</p>
<pre><code class="language-sh">$ imdl torrent show --input foo.torrent
</code></pre>
<p>Verify downloaded torrents:</p>
<pre><code class="language-sh">$ imdl torrent verify --input foo.torrent --content foo
</code></pre>
<p>Generate magnet links from <code>.torrent</code> files:</p>
<pre><code class="language-sh">$ imdl torrent link --input foo.torrent
</code></pre>
<p>Show infromation about the piece length picker:</p>
<pre><code class="language-sh">$ imdl torrent piece-length
</code></pre>
<p>Print completion scripts for the <code>imdl</code> binary:</p>
<pre><code class="language-sh">$ imdl completions --shell zsh
</code></pre>
<p>Functionality that is not yet finalized, but still available for preview, can be accessed with the <code>--unstable</code> flag:</p>
<p>Print information about a collection of torrents:</p>
<pre><code class="language-sh">$ imdl --unstable torrent stats --input dir
</code></pre>
<p>Happy sharing!</p>
<h1 id="faq"><a class="header" href="#faq">FAQ</a></h1>
<ul>
<li>
<p><a href="faq.html#fzf-preview">Can Intermodal be used to preview torrents with <code>fzf</code>?</a></p>
</li>
<li>
<p><a href="faq.html#git-repo">Can Intermodal be used to create a torrent from a Git repo?</a></p>
</li>
<li>
<p><a href="faq.html#include">How do I include and exclude files when creating a torrent?</a></p>
</li>
</ul>
<p><a name="fzf-preview"></a></p>
<h2 id="can-intermodal-be-used-to-preview-torrents-with-fzf"><a class="header" href="#can-intermodal-be-used-to-preview-torrents-with-fzf">Can Intermodal be used to preview torrents with <code>fzf</code>?</a></h2>
</h2>
<p>Yes! <a href="https://github.com/mustaqimM">@mustaqimM</a> came up with the following:</p>
<pre><code>fzf --preview='imdl --color always --terminal torrent show --input {}
</code></pre>
<p><em>Note the use of <code>--color always</code> and <code>--terminal</code> to force colored, human readable output.</em></p>
<p>This can be used to, for example, preview the torrents in a directory:</p>
<pre><code>find . -name '*.torrent' | fzf --preview='imdl -c always -t torrent show -i {}'
</code></pre>
<p><a name="git-repo"></a></p>
<h2 id="can-intermodal-be-used-to-create-a-torrent-from-a-git-repo"><a class="header" href="#can-intermodal-be-used-to-create-a-torrent-from-a-git-repo">Can Intermodal be used to create a torrent from a Git repo?</a></h2>
</h2>
<p>Yes! The <code>--ignore</code> flag, contributed by <a href="https://github.com/Celeo">@Celeo</a>, can be used
to make <code>imdl torrent create</code> respect <code>.gitignore</code> files:</p>
<pre><code>imdl torrent create --ignore --include-hidden --include-junk --glob '!.git/*' --input .
</code></pre>
<p>In addition to <code>--ignore</code>, <code>--include-hidden</code>, <code>--include-junk</code>, and <code>--glob '!.git/*'</code>
are used to include files, like <code>.gitignore</code>, that are present in the repo but would
otherwise be skipped, and to skip the contents of the <code>.git</code> directory.</p>
<p>Equivalently, with short flags:</p>
<pre><code>imdl torrent create --ignore -hjg '!.git/*' -i .
</code></pre>
<p><a name="include"></a></p>
<h2 id="how-do-i-include-and-exclude-files-when-creating-a-torrent"><a class="header" href="#how-do-i-include-and-exclude-files-when-creating-a-torrent">How do I include and exclude files when creating a torrent?</a></h2>
</h2>
<p>There are a few ways to control which files are included when you create a torrent.</p>
<p>By default, symlinks, hidden files, and common “junk” files are excluded. To include these files, use:</p>
<ul>
<li><code>--follow-symlinks</code> to include files pointed to by a symlink.</li>
<li><code>--include-hidden</code> to include files with names that start with <code>.</code> or are hidden by a file attribute.</li>
<li><code>--include-junk</code> to include “junk” files like <code>.DS_Store</code>.</li>
</ul>
<p>The <code>--ignore</code> flag makes Intermodal respect <code>.gitignore</code> and <code>.ignore</code> files.</p>
<p>This can be used to <a href="faq.html#git-repo">create a torrent from a Git repository</a>, or to exclude files by creating a file called <code>.ignore</code>, adding patterns with the same syntax as <code>.gitignore</code> that match those files, and using <code>--ignore</code> when you create the torrent.</p>
<p>Additionally, you can use <code>--glob PATTERN</code> to both include and exclude files.</p>
<p>If <code>PATTERN</code> does not start with <code>!</code>, only those files that match <code>PATTERN</code> will be included.</p>
<p>If <code>PATTERN</code> starts with <code>!</code>, those files that match <code>PATTERN</code> will be excluded.</p>
<p><code>--glob</code> can be passed multiple times, to include multiple subsets of files:</p>
<pre><code># only include `foo/bar` and `foo/bob`
imdl torrent create --input foo --glob bar/ --glob bob/
</code></pre>
<p>To exclude multiple subsets of files:</p>
<pre><code># don't include `foo/bar` and `foo/bob`
imdl torrent create --input foo --glob '!bar/' --glob '!bob/'
</code></pre>
<p>Or to refine a pattern:</p>
<pre><code># include everything in `foo/bar` but not anything in `foo/bar/baz`
imdl torrent create --input foo --glob `bar/` --glob `!bar/baz/`
</code></pre>
<p><code>--glob</code> can be passed any number of times. If multiple <code>PATTERN</code>s match a path, the last one on the command line takes precedence.</p>
<h1 id="commands"><a class="header" href="#commands">Commands</a></h1>
<p>This page intentionally left blank.</p>
<h1 id="imdl"><a class="header" href="#imdl"><code>imdl</code></a></h1>
<pre><code>imdl v0.1.12
Casey Rodarmor &lt;casey@rodarmor.com&gt;
📦 A 40' shipping container for the internet -
https://github.com/casey/intermodal

USAGE:
    imdl [FLAGS] [OPTIONS] &lt;SUBCOMMAND&gt;

FLAGS:
    -h, --help        Print help message.
    -q, --quiet       Suppress normal output.
    -t, --terminal    Disable automatic terminal detection and behave as if both
                      standard output and standard error are connected to a
                      terminal.
    -u, --unstable    Enable unstable features. To avoid premature stabilization
                      and excessive version churn, unstable features are
                      unavailable unless this flag is set. Unstable features are
                      not bound by semantic versioning stability guarantees, and
                      may be changed or removed at any time.
    -V, --version     Print version number.

OPTIONS:
    -c, --color &lt;WHEN&gt;    Print colorful output according to `WHEN`. When
                          `auto`, the default, colored output is only enabled if
                          imdl detects that it is connected to a terminal, the
                          `NO_COLOR` environment variable is not set, and the
                          `TERM` environment variable is not set to `dumb`.
                          [default: auto]  [possible values: auto, always,
                          never]

SUBCOMMANDS:
    completions    Print shell completion scripts to standard output.
    help           Prints this message or the help of the given
                   subcommand(s)
    torrent        Subcommands related to the BitTorrent protocol.

</code></pre>
<h1 id="imdl-completions"><a class="header" href="#imdl-completions"><code>imdl completions</code></a></h1>
<pre><code>imdl-completions 0.1.12
Print shell completion scripts to standard output.

USAGE:
    imdl completions [OPTIONS] &lt;SHELL&gt;

FLAGS:
    -h, --help       Print help message.
    -V, --version    Print version number.

OPTIONS:
    -d, --dir &lt;DIR&gt;        Write completion script to `DIR` with an appropriate
                           filename. If `--shell` is not given, write all
                           completion scripts.
    -s, --shell &lt;SHELL&gt;    Print completion script for `SHELL`. [possible
                           values: zsh, bash, fish, powershell, elvish]

ARGS:
    &lt;SHELL&gt;    Print completion script for `SHELL`. [possible values: zsh,
               bash, fish, powershell, elvish]

</code></pre>
<h1 id="imdl-torrent"><a class="header" href="#imdl-torrent"><code>imdl torrent</code></a></h1>
<pre><code>imdl-torrent 0.1.12
Subcommands related to the BitTorrent protocol.

USAGE:
    imdl torrent &lt;SUBCOMMAND&gt;

FLAGS:
    -h, --help       Print help message.
    -V, --version    Print version number.

SUBCOMMANDS:
    create          Create a .torrent file.
    help            Prints this message or the help of the given
                    subcommand(s)
    link            Generate a magnet link from a .torrent file.
    piece-length    Display information about automatic piece length
                    selection.
    show            Display information about a .torrent file.
    stats           Show statistics about a collection of .torrent files.
    verify          Verify files against a .torrent file.

</code></pre>
<h1 id="imdl-torrent-create"><a class="header" href="#imdl-torrent-create"><code>imdl torrent create</code></a></h1>
<pre><code>imdl-torrent-create 0.1.12
Create a .torrent file.

USAGE:
    imdl torrent create [FLAGS] [OPTIONS] &lt;INPUT&gt;

FLAGS:
    -n, --dry-run             Skip writing `.torrent` file to disk.
    -F, --follow-symlinks     Follow symlinks in torrent input. By default,
                              symlinks to files and directories are not included
                              in torrent contents.
    -f, --force               Overwrite the destination `.torrent` file, if it
                              exists.
        --help                Print help message.
        --ignore              Skip files listed in `.gitignore`, `.ignore`,
                              `.git/info/exclude`, and `git config --get
                              core.excludesFile`.
    -h, --include-hidden      Include hidden files that would otherwise be
                              skipped, such as files that start with a `.`, and
                              files hidden by file attributes on macOS and
                              Windows.
    -j, --include-junk        Include junk files that would otherwise be
                              skipped.
    -M, --md5                 Include MD5 checksum of each file in the torrent.
                              N.B. MD5 is cryptographically broken and only
                              suitable for checking for accidental corruption.
        --no-created-by       Do not populate `created by` key of generated
                              torrent with imdl version information.
        --no-creation-date    Do not populate `creation date` key of generated
                              torrent with current time.
    -O, --open                Open `.torrent` file after creation. Uses `xdg-
                              open`, `gnome-open`, or `kde-open` on Linux;
                              `open` on macOS; and `cmd /C start` on Windows
        --link                Print created torrent `magnet:` URL to standard
                              output
    -P, --private             Set the `private` flag. Torrent clients that
                              understand the flag and participate in the swarm
                              of a torrent with the flag set will only announce
                              themselves to the announce URLs included in the
                              torrent, and will not use other peer discovery
                              mechanisms, such as the DHT or local peer
                              discovery. See BEP 27: Private Torrents for more
                              information.
    -S, --show                Display information about created torrent file.
    -V, --version             Print version number.

OPTIONS:
    -A, --allow &lt;LINT&gt;...
            Allow `LINT`. Lints check for conditions which, although permitted,
            are not usually desirable. For example, piece length can be any non-
            zero value, but probably shouldn't be below 16 KiB. The lint
            `small-piece-size` checks for this, and `--allow small-piece-size`
            can be used to disable this check. [possible values: private-
            trackerless, small-piece-length, uneven-piece-length]
    -a, --announce &lt;URL&gt;
            Use `URL` as the primary tracker announce URL. To supply multiple
            announce URLs, also use `--announce-tier`.
    -t, --announce-tier &lt;URL-LIST&gt;...
            Use `URL-LIST` as a tracker announce tier. Each instance adds a new
            tier. To add multiple trackers to a given tier, separate their
            announce URLs with commas:
            
            `--announce-tier
            udp://example.com:80/announce,https://example.net:443/announce`
                        
            Announce tiers are stored in the `announce-list` key of the top-
            level metainfo dictionary as a list of lists of strings, as
            defined by BEP 12: Multitracker Metadata Extension.
                        
            Note: Many BitTorrent clients do not implement the behavior
            described in BEP 12. See the discussion here for more details:
            https://github.com/bittorrent/bittorrent.org/issues/82
    -c, --comment &lt;TEXT&gt;
            Include `TEXT` as the comment for generated `.torrent` file. Stored
            under `comment` key of top-level metainfo dictionary.
        --node &lt;NODE&gt;...
            Add DHT bootstrap node `NODE` to torrent. `NODE` should be in the
            form `HOST:PORT`, where `HOST` is a domain name, an IPv4 address, or
            an IPv6 address surrounded by brackets. May be given more than once
            to add multiple bootstrap nodes.
            
            Examples:
            
                --node router.example.com:1337
            
                --node 203.0.113.0:2290
            
                --node [2001:db8:4275:7920:6269:7463:6f69:6e21]:8832
    -g, --glob &lt;GLOB&gt;...
            Include or exclude files that match `GLOB`. Multiple glob may be
            provided, with the last one taking precedence. Precede a glob with
            `!` to exclude it.
    -i, --input &lt;INPUT&gt;
            Read torrent contents from `INPUT`. If `INPUT` is a file, torrent
            will be a single-file torrent.  If `INPUT` is a directory, torrent
            will be a multi-file torrent.  If `INPUT` is `-`, read from standard
            input. Piece length defaults to 256KiB when reading from standard
            input if `--piece-length` is not given.
    -N, --name &lt;TEXT&gt;
            Set name of torrent to `TEXT`. Defaults to the filename of the
            argument to `--input`. Required when `--input -`.
    -o, --output &lt;TARGET&gt;
            Save `.torrent` file to `TARGET`, or print to standard output if
            `TARGET` is `-`. Defaults to the argument to `--input` with an
            `.torrent` extension appended. Required when `--input -`.
        --peer &lt;PEER&gt;...                 Add `PEER` to magnet link.
    -p, --piece-length &lt;BYTES&gt;
            Set piece length to `BYTES`. Accepts SI units, e.g. kib, mib, and
            gib.
        --sort-by &lt;SPEC&gt;...
            Set the order of files within a torrent. `SPEC` should be of the
            form `KEY:ORDER`, with `KEY` being one of `path` or `size`, and
            `ORDER` being `ascending` or `descending`. `:ORDER` defaults to
            `ascending` if omitted. The `--sort-by` flag may be given more than
            once, with later values being used to break ties. Ties that remain
            are broken in ascending path order.
            
            Sort in ascending order by path, the default:
            
                --sort-by path:ascending
            
            Sort in ascending order by path, more concisely:
            
                --sort-by path
            
            Sort in ascending order by size, break ties in descending path
            order:
            
                --sort-by size:ascending --sort-by path:descending
    -s, --source &lt;TEXT&gt;
            Set torrent source to `TEXT`. Stored under `source` key of info
            dictionary. This is useful for keeping statistics from being mis-
            reported when participating in swarms with the same contents,
            but with different trackers. When source is set to a unique value
            for torrents with the same contents, torrent clients will treat them
            as distinct torrents, and not share peers between them, and will
            correctly report download and upload statistics to multiple
            trackers.
        --update-url &lt;URL&gt;
            Set torrent feed URL to `URL`, stored in the `update-url` key of the
            info dictionary. Clients that support BEP 39 will use the update URL
            to download revised versions of the torret's metainfo. Note that BEP
            39 is not widely supported.

ARGS:
    &lt;INPUT&gt;    Read torrent contents from `INPUT`. If `INPUT` is a file,
               torrent will be a single-file torrent.  If `INPUT` is a
               directory, torrent will be a multi-file torrent.  If `INPUT`
               is `-`, read from standard input. Piece length defaults to
               256KiB when reading from standard input if `--piece-length`
               is not given.

</code></pre>
<h1 id="imdl-torrent-link"><a class="header" href="#imdl-torrent-link"><code>imdl torrent link</code></a></h1>
<pre><code>imdl-torrent-link 0.1.12
Generate a magnet link from a .torrent file.

USAGE:
    imdl torrent link [FLAGS] [OPTIONS] &lt;INPUT&gt;

FLAGS:
    -h, --help       Print help message.
    -O, --open       Open generated magnet link. Uses `xdg-open`, `gnome-open`,
                     or `kde-open` on Linux; `open` on macOS; and `cmd /C start`
                     on Windows.
    -V, --version    Print version number.

OPTIONS:
    -s, --select-only &lt;INDICES&gt;...
            Select files to download. Values are indices into the `info.files`
            list, e.g. `--select-only 1,2,3`.
    -i, --input &lt;INPUT&gt;
            Generate magnet link from metainfo at `INPUT`. If `INPUT` is `-`,
            read metainfo from standard input.
    -p, --peer &lt;PEER&gt;...              Add `PEER` to magnet link.

ARGS:
    &lt;INPUT&gt;    Generate magnet link from metainfo at `INPUT`. If `INPUT` is
               `-`, read metainfo from standard input.

</code></pre>
<h1 id="imdl-torrent-piece-length"><a class="header" href="#imdl-torrent-piece-length"><code>imdl torrent piece-length</code></a></h1>
<pre><code>imdl-torrent-piece-length 0.1.12
Display information about automatic piece length selection.

USAGE:
    imdl torrent piece-length

FLAGS:
    -h, --help       Print help message.
    -V, --version    Print version number.

</code></pre>
<h1 id="imdl-torrent-show"><a class="header" href="#imdl-torrent-show"><code>imdl torrent show</code></a></h1>
<pre><code>imdl-torrent-show 0.1.12
Display information about a .torrent file.

USAGE:
    imdl torrent show [FLAGS] [OPTIONS] &lt;INPUT&gt;

FLAGS:
    -h, --help       Print help message.
    -j, --json       Output data as JSON instead of the default format.
    -V, --version    Print version number.

OPTIONS:
    -i, --input &lt;INPUT&gt;    Show information about torrent at `INPUT`. If `INPUT`
                           is `-`, read torrent metainfo from standard input.

ARGS:
    &lt;INPUT&gt;    Show information about torrent at `INPUT`. If `INPUT` is `-`,
               read torrent metainfo from standard input.

</code></pre>
<h1 id="imdl-torrent-stats"><a class="header" href="#imdl-torrent-stats"><code>imdl torrent stats</code></a></h1>
<pre><code>imdl-torrent-stats 0.1.12
Show statistics about a collection of .torrent files.

USAGE:
    imdl torrent stats [FLAGS] [OPTIONS] --input &lt;PATH&gt;

FLAGS:
    -h, --help       Print help message.
    -p, --print      Pretty print the contents of each torrent as it is
                     processed.
    -V, --version    Print version number.

OPTIONS:
    -e, --extract-pattern &lt;REGEX&gt;...
            Extract and display values under key paths that match `REGEX`.
            Subkeys of a bencodeded dictionary are delimited by `/`, and values
            of a bencoded list are delmited by `*`. For example, given the
            following bencoded dictionary `{&quot;foo&quot;: [{&quot;bar&quot;: {&quot;baz&quot;: 2}}]}`, the
            value `2`'s key path will be `foo*bar/baz`. The value `2` would be
            displayed if any of `bar`, `foo[*]bar/baz`, or `foo.*baz` were
            passed to `--extract-pattern.
    -i, --input &lt;PATH&gt;
            Search `PATH` for torrents. May be a directory or a single torrent
            file.
    -l, --limit &lt;N&gt;
            Stop after processing `N` torrents. Useful when processing large
            collections of `.torrent` files.

</code></pre>
<h1 id="imdl-torrent-verify"><a class="header" href="#imdl-torrent-verify"><code>imdl torrent verify</code></a></h1>
<pre><code>imdl-torrent-verify 0.1.12
Verify files against a .torrent file.

USAGE:
    imdl torrent verify [OPTIONS] &lt;INPUT&gt;

FLAGS:
    -h, --help       Print help message.
    -V, --version    Print version number.

OPTIONS:
    -c, --content &lt;PATH&gt;    Verify torrent content at `PATH` against torrent
                            metainfo. Defaults to `name` field of torrent info
                            dictionary.
    -i, --input &lt;INPUT&gt;     Verify torrent contents against torrent metainfo in
                            `INPUT`. If `INPUT` is `-`, read metainfo from
                            standard input.

ARGS:
    &lt;INPUT&gt;    Verify torrent contents against torrent metainfo in `INPUT`.
               If `INPUT` is `-`, read metainfo from standard input.

</code></pre>
<h1 id="bittorrent"><a class="header" href="#bittorrent">BitTorrent</a></h1>
<p>This page intentionally left blank.</p>
<h1 id="bittorrent-piece-length-selection"><a class="header" href="#bittorrent-piece-length-selection">BitTorrent Piece Length Selection</a></h1>
<p>BitTorrent <code>.torrent</code> files contain so-called metainfo that allows BitTorrent
peers to locate, download, and verify the contents of a torrent.</p>
<p>This metainfo includes the piece list, a list of SHA-1 hashes of fixed-size
pieces of the torrent data. The size of these pieces is chosen by the torrent
creator.</p>
<p>Intermodal has a simple algorithm that attempts to pick a reasonable piece
length for a torrent given the size of the contents.</p>
<p>For compatibility with the
<a href="http://bittorrent.org/beps/bep_0052.html">BitTorrent v2 specification</a>, the
algorithm chooses piece lengths that are powers of two, and that are at least
16KiB.</p>
<p>The maximum automatically chosen piece length is 16MiB, as piece lengths larger
than 16MiB have been reported to cause issues for some clients.</p>
<p>In addition to the above constraints, there are a number of additional factors
to consider.</p>
<h2 id="factors-favoring-smaller-piece-length"><a class="header" href="#factors-favoring-smaller-piece-length">Factors favoring smaller piece length</a></h2>
<ul>
<li>
<p>To avoid uploading bad data, peers only upload data from full pieces, which
can be verified by hash. Decreasing the piece size allows peers to more
quickly obtain a full piece, which decreases the time before they begin
uploading, and receiving data in return.</p>
</li>
<li>
<p>Decreasing the piece size decreases the amount of data that must be thrown
away in case of corruption.</p>
</li>
</ul>
<h2 id="factors-favoring-larger-piece-length"><a class="header" href="#factors-favoring-larger-piece-length">Factors favoring larger piece length</a></h2>
<ul>
<li>
<p>Increasing the piece size decreases the protocol overhead from requesting
many pieces.</p>
</li>
<li>
<p>Increasing the piece size decreases the number of pieces, decreasing the
size of the metainfo.</p>
</li>
<li>
<p>Increasing piece length increases the proportion of disk seeks to disk
reads, which can be beneficial for spinning disks.</p>
</li>
</ul>
<h2 id="intermodals-algorithm"><a class="header" href="#intermodals-algorithm">Intermodal’s Algorithm</a></h2>
<p>In Python, the algorithm used by intermodal is:</p>
<pre><code class="language-python">MIN = 16 * 1024
MAX = 16 * 1024 * 1024

def piece_length(content_length):
  exponent = math.log2(content_length)
  length = 1 &lt;&lt; int((exponent / 2 + 4))
  return min(max(length, MIN), MAX)
</code></pre>
<p>Which gives the following piece lengths:</p>
<pre><code>Content -&gt; Piece Length x Count    = Piece List Size
16 KiB  -&gt; 16 KiB       x 1        = 20 bytes
32 KiB  -&gt; 16 KiB       x 2        = 40 bytes
64 KiB  -&gt; 16 KiB       x 4        = 80 bytes
128 KiB -&gt; 16 KiB       x 8        = 160 bytes
256 KiB -&gt; 16 KiB       x 16       = 320 bytes
512 KiB -&gt; 16 KiB       x 32       = 640 bytes
1 MiB   -&gt; 16 KiB       x 64       = 1.25 KiB
2 MiB   -&gt; 16 KiB       x 128      = 2.5 KiB
4 MiB   -&gt; 32 KiB       x 128      = 2.5 KiB
8 MiB   -&gt; 32 KiB       x 256      = 5 KiB
16 MiB  -&gt; 64 KiB       x 256      = 5 KiB
32 MiB  -&gt; 64 KiB       x 512      = 10 KiB
64 MiB  -&gt; 128 KiB      x 512      = 10 KiB
128 MiB -&gt; 128 KiB      x 1024     = 20 KiB
256 MiB -&gt; 256 KiB      x 1024     = 20 KiB
512 MiB -&gt; 256 KiB      x 2048     = 40 KiB
1 GiB   -&gt; 512 KiB      x 2048     = 40 KiB
2 GiB   -&gt; 512 KiB      x 4096     = 80 KiB
4 GiB   -&gt; 1 MiB        x 4096     = 80 KiB
8 GiB   -&gt; 1 MiB        x 8192     = 160 KiB
16 GiB  -&gt; 2 MiB        x 8192     = 160 KiB
32 GiB  -&gt; 2 MiB        x 16384    = 320 KiB
64 GiB  -&gt; 4 MiB        x 16384    = 320 KiB
128 GiB -&gt; 4 MiB        x 32768    = 640 KiB
256 GiB -&gt; 8 MiB        x 32768    = 640 KiB
512 GiB -&gt; 8 MiB        x 65536    = 1.25 MiB
1 TiB   -&gt; 16 MiB       x 65536    = 1.25 MiB
2 TiB   -&gt; 16 MiB       x 131072   = 2.5 MiB
4 TiB   -&gt; 16 MiB       x 262144   = 5 MiB
8 TiB   -&gt; 16 MiB       x 524288   = 10 MiB
16 TiB  -&gt; 16 MiB       x 1048576  = 20 MiB
32 TiB  -&gt; 16 MiB       x 2097152  = 40 MiB
64 TiB  -&gt; 16 MiB       x 4194304  = 80 MiB
128 TiB -&gt; 16 MiB       x 8388608  = 160 MiB
256 TiB -&gt; 16 MiB       x 16777216 = 320 MiB
512 TiB -&gt; 16 MiB       x 33554432 = 640 MiB
1 PiB   -&gt; 16 MiB       x 67108864 = 1.25 GiB
</code></pre>
<h2 id="references"><a class="header" href="#references">References</a></h2>
<h3 id="articles"><a class="header" href="#articles">Articles</a></h3>
<ul>
<li>
<p><a href="https://wiki.vuze.com/w/Torrent_Piece_Size">Vuze Wiki</a></p>
</li>
<li>
<p><a href="https://torrentfreak.com/how-to-make-the-best-torrents-081121/">TorrentFreak</a></p>
</li>
</ul>
<h3 id="implementations"><a class="header" href="#implementations">Implementations</a></h3>
<ul>
<li>
<p><a href="https://github.com/arvidn/libtorrent/blob/a3440e54bb7f65ac6100c3d993c53f887025d660/src/create_torrent.cpp#L367">libtorrent</a></p>
</li>
<li>
<p><a href="https://github.com/transmission/transmission/blob/a482100f0cbae8050fd7e954af2cb1311205916e/libtransmission/makemeta.c#L89">libtransmission</a></p>
</li>
<li>
<p><a href="https://github.com/kz26/dottorrent/blob/fea5714efe0cde2a55eabfb387295781a78d84bb/dottorrent/__init__.py#L154">dottorrent</a></p>
</li>
<li>
<p><a href="https://github.com/torrent-file-editor/torrent-file-editor/blob/811e401b38f26b6d94c4808c54ae2dcc7bbc27dd/mainwindow.cpp#L1210">Torrent File Editor</a></p>
</li>
</ul>
<h1 id="bep-support"><a class="header" href="#bep-support">BEP Support</a></h1>
<table><thead><tr><th align="center">Symbol</th><th>Meaning</th></tr></thead><tbody>
<tr><td align="center">✅</td><td>Supported</td></tr>
<tr><td align="center">❌</td><td>Unsupported (link to issue)</td></tr>
<tr><td align="center">➖</td><td>Not Applicable</td></tr>
</tbody></table>
<br>
<table><thead><tr><th align="center">BEP</th><th align="center">Status</th><th align="left">Title</th></tr></thead><tbody>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0000.html">00</a></td><td align="center">➖</td><td align="left">Index of BitTorrent Enhancement Proposals</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0001.html">01</a></td><td align="center">➖</td><td align="left">The BitTorrent Enhancement Proposal Process</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0002.html">02</a></td><td align="center">➖</td><td align="left">Sample reStructured Text BEP Template</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0003.html">03</a></td><td align="center">✅</td><td align="left">The BitTorrent Protocol Specification</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0004.html">04</a></td><td align="center">➖</td><td align="left">Assigned Numbers</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0005.html">05</a></td><td align="center">✅</td><td align="left">DHT Protocol</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0006.html">06</a></td><td align="center">➖</td><td align="left">Fast Extension</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0007.html">07</a></td><td align="center">➖</td><td align="left">IPv6 Tracker Extension</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0008.html">08</a></td><td align="center">➖</td><td align="left">Tracker Peer Obfuscation</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0009.html">09</a></td><td align="center">✅</td><td align="left">Extension for Peers to Send Metadata Files</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0010.html">10</a></td><td align="center">➖</td><td align="left">Extension Protocol</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0011.html">11</a></td><td align="center">➖</td><td align="left">Peer Exchange (PEX)</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0012.html">12</a></td><td align="center">✅</td><td align="left">Multitracker Metadata Extension</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0014.html">14</a></td><td align="center">➖</td><td align="left">Local Service Discovery</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0015.html">15</a></td><td align="center">➖</td><td align="left">UDP Tracker Protocol for BitTorrent</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0016.html">16</a></td><td align="center">➖</td><td align="left">Superseeding</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0017.html">17</a></td><td align="center"><a href="https://github.com/casey/intermodal/issues/92">❌</a></td><td align="left">HTTP Seeding</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0018.html">18</a></td><td align="center">➖</td><td align="left">Search Engine Specificiation</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0019.html">19</a></td><td align="center"><a href="https://github.com/casey/intermodal/issues/93">❌</a></td><td align="left">WebSeed - HTTP/FTP Seeding (GetRight style)</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0020.html">20</a></td><td align="center">➖</td><td align="left">Peer ID Conventions</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0021.html">21</a></td><td align="center">➖</td><td align="left">Extension for partial seeds</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0022.html">22</a></td><td align="center">➖</td><td align="left">BitTorrent Local Tracker Discovery Protocol</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0023.html">23</a></td><td align="center">➖</td><td align="left">Tracker Returns Compact Peer Lists</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0024.html">24</a></td><td align="center">➖</td><td align="left">Tracker Returns External IP</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0025.html">25</a></td><td align="center">➖</td><td align="left">An Alternate BitTorrent Cache Discovery Protocol</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0026.html">26</a></td><td align="center">➖</td><td align="left">Zeroconf Peer Advertising and Discovery</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0027.html">27</a></td><td align="center">✅</td><td align="left">Private Torrents</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0028.html">28</a></td><td align="center">➖</td><td align="left">Tracker exchange extension</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0029.html">29</a></td><td align="center">➖</td><td align="left">uTorrent transport protocol</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0030.html">30</a></td><td align="center"><a href="https://github.com/casey/intermodal/issues/94">❌</a></td><td align="left">Merkle hash torrent extension</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0031.html">31</a></td><td align="center">➖</td><td align="left">Failure Retry Extension</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0032.html">32</a></td><td align="center">➖</td><td align="left">BitTorrent DHT Extensions for IPv6</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0033.html">33</a></td><td align="center">➖</td><td align="left">DHT Scrapes</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0034.html">34</a></td><td align="center">➖</td><td align="left">DNS Tracker Preferences</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0035.html">35</a></td><td align="center"><a href="https://github.com/casey/intermodal/issues/96">❌</a></td><td align="left">Torrent Signing</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0036.html">36</a></td><td align="center">➖</td><td align="left">Torrent RSS feeds</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0037.html">37</a></td><td align="center">➖</td><td align="left">Anonymous BitTorrent over proxies</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0038.html">38</a></td><td align="center">➖</td><td align="left">Finding Local Data Via Torrent File Hints</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0039.html">39</a></td><td align="center"><a href="https://github.com/casey/intermodal/issues/98">❌</a></td><td align="left">Updating Torrents Via Feed URL</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0040.html">40</a></td><td align="center">➖</td><td align="left">Canonical Peer Priority</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0041.html">41</a></td><td align="center">➖</td><td align="left">UDP Tracker Protocol Extensions</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0042.html">42</a></td><td align="center">➖</td><td align="left">DHT Security extension</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0043.html">43</a></td><td align="center">➖</td><td align="left">Read-only DHT Nodes</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0044.html">44</a></td><td align="center">➖</td><td align="left">Storing arbitrary data in the DHT</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0045.html">45</a></td><td align="center">➖</td><td align="left">Multiple-address operation for the BitTorrent DHT</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0046.html">46</a></td><td align="center"><a href="https://github.com/casey/intermodal/issues/244">❌</a></td><td align="left">Updating Torrents Via DHT Mutable Items</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0047.html">47</a></td><td align="center"><a href="https://github.com/casey/intermodal/issues/99">❌</a></td><td align="left">Padding files and extended file attributes</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0048.html">48</a></td><td align="center">➖</td><td align="left">Tracker Protocol Extension: Scrape</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0049.html">49</a></td><td align="center"><a href="https://github.com/casey/intermodal/issues/100">❌</a></td><td align="left">Distributed Torrent Feeds</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0050.html">50</a></td><td align="center">➖</td><td align="left">Publish/Subscribe Protocol</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0051.html">51</a></td><td align="center">➖</td><td align="left">DHT Infohash Indexing</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0052.html">52</a></td><td align="center"><a href="https://github.com/casey/intermodal/issues/101">❌</a></td><td align="left">The BitTorrent Protocol Specification v2</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0053.html">53</a></td><td align="center"><a href="https://github.com/casey/intermodal/issues/245">❌</a></td><td align="left">Magnet URI extension - Select specific file indices for download</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0054.html">54</a></td><td align="center">➖</td><td align="left">The lt_donthave extension</td></tr>
<tr><td align="center"><a href="http://bittorrent.org/beps/bep_0055.html">55</a></td><td align="center">➖</td><td align="left">Holepunch extension</td></tr>
</tbody></table>
<h1 id="metainfo-utilities"><a class="header" href="#metainfo-utilities">Metainfo Utilities</a></h1>
<table><thead><tr><th>Name</th><th>UI</th><th>Language</th><th>Notes</th></tr></thead><tbody>
<tr><td><a href="https://github.com/rndusr/torf-cli">torf-cli</a></td><td>CLI</td><td>Python</td><td>Highly recommended utility for creating torrents and magnet links, as well as displaying information about and editing existing torrents.</td></tr>
<tr><td><a href="https://github.com/Rudde/mktorrent">mktorrent</a></td><td>CLI</td><td>C</td><td>Popular but unmaintained torrent file creator.</td></tr>
<tr><td><a href="https://github.com/xxkfqz/pmktorrent">pmktorrent</a></td><td>CLI</td><td>C</td><td>Maintained fork of mktorrent.</td></tr>
<tr><td><a href="https://github.com/mukaibot/mktorrent">mktorrent</a></td><td>Library</td><td>Ruby</td><td>Library for creating torrent files.</td></tr>
<tr><td><a href="https://github.com/rsnitsch/py3createtorrent/">py3createtorrent</a></td><td>CLI</td><td>Python</td><td>Torrent file creator.</td></tr>
<tr><td><a href="https://github.com/webtorrent/create-torrent">create-torrent</a></td><td>Library &amp; CLI</td><td>JavaScript</td><td>Javascript library and CLI for creating torrents.</td></tr>
<tr><td><a href="https://github.com/RecursiveForest/whatmp3">whatmp3</a></td><td>CLI</td><td>Python</td><td>Torrent file creator that automatically transcodes FLAC files.</td></tr>
<tr><td><a href="https://github.com/torrent-file-editor/torrent-file-editor">torrent-file-editor</a></td><td>GUI</td><td>C++</td><td>Graphical torrent file editor.</td></tr>
<tr><td><a href="https://github.com/repolho/torrent2magnet">torrent2magnet</a></td><td>CLI</td><td>Python</td><td>Creates magnet links from torrent files.</td></tr>
<tr><td><a href="https://github.com/elektito/ih2torrent">h2torrent</a></td><td>CLI</td><td>Python</td><td>Creates .torrent files from an infohash or magnet URI.</td></tr>
<tr><td><a href="https://github.com/kz26/dottorrent">dottorrent</a></td><td>Library</td><td>Python</td><td>Library for creating torrent files</td></tr>
<tr><td><a href="https://github.com/kz26/dottorrent-cli">dottorrent-cli</a></td><td>CLI</td><td>Python</td><td>Torrent file creator.</td></tr>
<tr><td><a href="https://github.com/kimbatt/torrent-creator/">torrent-creator</a></td><td>Web page</td><td>Typescript</td><td>Single-page web app torrent file creator.</td></tr>
<tr><td><a href="https://github.com/pyroscope/pyrocore">pyrocore</a></td><td>CLI</td><td>Python</td><td>Utilities for creating, modifying, and displaying torrent files.</td></tr>
<tr><td><a href="http://manpages.ubuntu.com/manpages/bionic/man1/buildtorrent.1.html">buildtorrent</a></td><td>CLI</td><td>C</td><td>Torrent file creator packaged for Ubuntu and Debian</td></tr>
<tr><td><a href="https://github.com/fuchsi/maketorrent">maketorrent</a></td><td>CLI</td><td>Rust</td><td>Torrent file creator.</td></tr>
</tbody></table>
<h1 id="distributing-large-data-sets"><a class="header" href="#distributing-large-data-sets">Distributing Large Data Sets</a></h1>
<p>Even though BitTorrent is well-suited for distributing large amounts of data,
very large torrents can still cause problems. Here are some of the problems you
might encounter, as well as suggestions for how to avoid or ameliorate those
issues.</p>
<p>Intermodal currently uses a single-threaded piece hashing algorithm. If you’re
distributing a large data set and hashing time is a problem, please open an
issue! I’m eager to improve hashing performance, but want to make sure I do it
in such a way that real workloads benefit.</p>
<h2 id="background"><a class="header" href="#background">Background</a></h2>
<p>In order to support incremental download and verification, as well as
resumption of partial downloads, the contents of a torrent are broken into
pieces.</p>
<p>The length of pieces varies is configurable, and the ideal choice of piece
length depends on many factors, but values between 16KiB and 256KiB are common.
Very large torrents may use much larger piece lengths, like 16MiB.</p>
<p>Each piece is hashed, and <code>.torrent</code> files, also referred to as metainfo,
contain a list of those hashes.</p>
<p>For all the example commands, I’ll be using <code>dir</code> for the directory containing
the data set you want to share.</p>
<h2 id="issues"><a class="header" href="#issues">Issues</a></h2>
<h3 id="torrent-file-too-large"><a class="header" href="#torrent-file-too-large"><code>.torrent</code> file too large</a></h3>
<p>When the amount of data is large, or the piece length is small, the number of
pieces can make the <code>.torrent</code> file very big.</p>
<p>To avoid this, you can either break the data into multiple torrents, or make
the piece length larger, so the <code>.torrent</code> file contains fewer pieces.</p>
<h4 id="breaking-data-into-multiple-torrents"><a class="header" href="#breaking-data-into-multiple-torrents">Breaking data into multiple torrents</a></h4>
<p><code>imdl torrent create</code> has a <code>--glob</code> option that can be used to control which
files are included in a torrent. If your data set is divided into multiple
files, ideally with a consistent naming scheme, this can be used to easily
create multiple torrents with different subsets of the data.</p>
<p>The name of the created torrent is usually derived from the name of the input,
so the output torrent name should be given manually to avoid conflicts:</p>
<pre><code>$ imdl torrent create -i dir -o a.torrent --glob 'dir/0*'
$ imdl torrent create -i dir -o b.torrent --glob 'dir/1*'
$ imdl torrent create -i dir -o c.torrent --glob 'dir/2*'
# etc…
</code></pre>
<h4 id="making-the-piece-length-larger"><a class="header" href="#making-the-piece-length-larger">Making the piece length larger</a></h4>
<p><code>imdl</code> has an automatic piece length picker, which should choose a good piece
length. You can see what choices it makes for different torrent sizes with:</p>
<pre><code>$ imdl torrrent piece-length
</code></pre>
<p>Some torrent clients don’t do well with piece lengths over 16 MiB, so the piece
length picker will never pick piece lengths over 16 MiB. This can be
overridden by specifying <code>--piece-length</code> manually. <code>--piece-length</code> takes
SI units, like <code>KiB</code>, <code>MiB</code>, and <code>KiB</code>:</p>
<pre><code>$ imdl torrent create -i dir --piece-length 128mib
</code></pre>
<h3 id="too-many-files"><a class="header" href="#too-many-files">Too many files</a></h3>
<p>Torrents containing a large number of separate files can cause performance
issues. It’s not clear if these performance issues are due to BitTorrent client
implementations, host OS file system issues, or both.</p>
<h4 id="distributing-your-data-set-as-an-iso-image"><a class="header" href="#distributing-your-data-set-as-an-iso-image">Distributing your data set as an ISO image</a></h4>
<p>By distributing your data set as an ISO image, all the files in your torrent
will be packed into a single <code>.iso</code> file. Additionally, recipients of the ISO
won’t have to decompress the whole data set to browse or extract individual
files.</p>
<p>You can create an ISO with <code>genisoimage</code>, which can be installed on Debian or
Ubuntu with:</p>
<pre><code>$ sudo apt install genisoimage
</code></pre>
<p>To create a compressed ISO containing your data set:</p>
<pre><code>$ genisoimage                \
    -transparent-compression \ # compress data in the ISO
    -untranslated-filenames  \ # don't mangle filenames
    -verbose                 \ # verbose output
    -output data.iso         \ # output path
    -V DATA_SET_NAME         \ # volume name
    dir                      \ # input path
</code></pre>
<p>The same command, but with short flags:</p>
<pre><code>$ genisoimage -zUvo data.iso -V DATA_SET_NAME dir
</code></pre>
<p>A torrent can then be created containing the ISO:</p>
<pre><code>$ imdl torrent create --input data.iso
</code></pre>
<p>Users can mount and unmount the ISO on Linux:</p>
<pre><code>$ sudo mkdir -p /mnt                   # create mount point
$ sudo mount --read-only data.iso /mnt # mount ISO
$ sudo umount /mnt                     # unmount when finished
</code></pre>
<p>Or MacOS:</p>
<pre><code>$ hdiutil mount data.iso                 # mount ISO
# hdiutil unmount /Volumes/DATA_SET_NAME # unmount when finished
</code></pre>
<p>On Windows, MacOS, and some Linux desktop environments, ISOs can also be
mounted by double-clicking the file.</p>
<h3 id="torrent-client-issues"><a class="header" href="#torrent-client-issues">Torrent Client Issues</a></h3>
<p>Some torrent clients don’t do well with torrents with large piece sizes, many
files, or a large amount of data.</p>
<h4 id="switch-to-a-libtorrent-based-client"><a class="header" href="#switch-to-a-libtorrent-based-client">Switch to a <code>libtorrent</code>-based client</a></h4>
<p>If you’re experiencing issues downloading a large data set, switching torrent
clients may help.</p>
<p>In my personal experience, torrent clients that use Arvid Norberg’s
<code>libtorrent</code> have done well with large amounts of data.</p>
<p><code>libtorrent</code>‘s <a href="https://en.wikipedia.org/wiki/Libtorrent">Wikipedia page</a> has a
<a href="https://en.wikipedia.org/wiki/Libtorrent#Applications">list</a> of torrent
clients that use <code>libtorrent</code>.</p>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>If you have suggestions for this guide, please don’t hesitate to open an
<a href="https://github.com/casey/intermodal/issues">issue</a>.</p>
<p>In particular, if you’ve found particular torrent clients to be good or bad at
downloading large data sets, or have run into issues or found solutions not
covered by this guide, I would love to know!</p>
<h1 id="udp-tracker-protocol"><a class="header" href="#udp-tracker-protocol">UDP Tracker Protocol</a></h1>
<p>This description of the UDP tracker protocol is adapted from
<a href="https://libtorrent.org/udp_tracker_protocol.html">this page</a> by Arvid Norberg.</p>
<p>A tracker with the protocol “udp://” in its URI is should be contacted with
this protocol.</p>
<p>All values are sent in network byte order (big-endian).</p>
<p>If no response to a request is received within 15 seconds, resend the request.
If no reply has been received after 60 seconds, stop retrying.</p>
<p>Transaction IDs sent in request messages are returned in response messages.</p>
<p>Connection ID returned by tracker in connect response message should be sent
by client in later requests. The initial connection ID sent in connect requests
shoudl be <code>0x41727101980</code> in network byte order.</p>
<p>Action values in requests and responses should be taken from the <code>Actions</code>
table.</p>
<p>When a message is followed by a structure labeled <em>repeating:</em>, the rest of the
message is zero or more of that structure.</p>
<p>Fields with type <code>[T; N]</code> are <code>N</code> instances of values of type <code>T</code> with no extra
padding.</p>
<p>Fields with type <code>[T; NAME]</code> are <code>NAME</code> instances of values of type <code>T</code> with no
extra padding, where <code>NAME</code> is an integer field of the same message.</p>
<p>Files with type <code>[T]</code> are zero or more instances of values of type <code>T</code> with no
extra padding, which make up any trailing bytes of the message.</p>
<h2 id="actions"><a class="header" href="#actions">Actions</a></h2>
<table><thead><tr><th>name</th><th>value</th></tr></thead><tbody>
<tr><td>connect</td><td>0</td></tr>
<tr><td>announce</td><td>1</td></tr>
<tr><td>scrape</td><td>2</td></tr>
<tr><td>error</td><td>3</td></tr>
</tbody></table>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<table><thead><tr><th>name</th><th>value</th></tr></thead><tbody>
<tr><td>none</td><td>0</td></tr>
<tr><td>completed</td><td>1</td></tr>
<tr><td>started</td><td>2</td></tr>
<tr><td>stopped</td><td>3</td></tr>
</tbody></table>
<h2 id="error"><a class="header" href="#error">Error</a></h2>
<table><thead><tr><th>type</th><th>name</th><th>description</th></tr></thead><tbody>
<tr><td>i32</td><td>action</td><td></td></tr>
<tr><td>i32</td><td>transaction_id</td><td></td></tr>
<tr><td>[i8]</td><td>error_string</td><td>rest of packet is string describing error</td></tr>
</tbody></table>
<h2 id="connect"><a class="header" href="#connect">Connect</a></h2>
<h3 id="request"><a class="header" href="#request">Request</a></h3>
<table><thead><tr><th>type</th><th>name</th></tr></thead><tbody>
<tr><td>i64</td><td>connection_id</td></tr>
<tr><td>i32</td><td>action</td></tr>
<tr><td>i32</td><td>transaction_id</td></tr>
</tbody></table>
<h3 id="response"><a class="header" href="#response">Response</a></h3>
<table><thead><tr><th>type</th><th>name</th></tr></thead><tbody>
<tr><td>i32</td><td>action</td></tr>
<tr><td>i32</td><td>transaction_id</td></tr>
<tr><td>i64</td><td>connection_id</td></tr>
</tbody></table>
<h2 id="announce"><a class="header" href="#announce">Announce</a></h2>
<h3 id="request-1"><a class="header" href="#request-1">Request</a></h3>
<table><thead><tr><th>type</th><th>name</th><th>description</th></tr></thead><tbody>
<tr><td>i64</td><td>connection_id</td><td></td></tr>
<tr><td>i32</td><td>action</td><td></td></tr>
<tr><td>i32</td><td>transaction_id</td><td></td></tr>
<tr><td>[i8; 20]</td><td>info_hash</td><td>torrent infohash</td></tr>
<tr><td>[i8; 20]</td><td>peer_id</td><td>peer ID</td></tr>
<tr><td>i64</td><td>downloaded</td><td>bytes downloaded this session</td></tr>
<tr><td>i64</td><td>left</td><td>bytes left to download</td></tr>
<tr><td>i64</td><td>uploaded</td><td>bytes uploaded this session</td></tr>
<tr><td>i32</td><td>event</td><td>from <code>Events</code> table</td></tr>
<tr><td>u32</td><td>ip</td><td>0 to use sender of this UDP packet</td></tr>
<tr><td>u32</td><td>key</td><td>randomly generated by client, unknown function.</td></tr>
<tr><td>i32</td><td>num_want</td><td>maximum number of peers to send in reply, use -1 for default</td></tr>
<tr><td>u16</td><td>port</td><td>listening port</td></tr>
<tr><td>u16</td><td>extensions</td><td></td></tr>
</tbody></table>
<h3 id="response-1"><a class="header" href="#response-1">Response</a></h3>
<table><thead><tr><th>type</th><th>name</th><th>description</th></tr></thead><tbody>
<tr><td>i32</td><td>action</td><td></td></tr>
<tr><td>i32</td><td>transaction_id</td><td></td></tr>
<tr><td>i32</td><td>interval</td><td>seconds to wait announcing again</td></tr>
<tr><td>i32</td><td>leechers</td><td>number of peers in swarm that have not finished downloading</td></tr>
<tr><td>i32</td><td>seeders</td><td>number of peers in swarm that have finished downloading</td></tr>
</tbody></table>
<p><em>repeating:</em></p>
<table><thead><tr><th>type</th><th>name</th><th>description</th></tr></thead><tbody>
<tr><td>i32</td><td>ip</td><td>peer IP</td></tr>
<tr><td>i16</td><td>port</td><td>peer listening port</td></tr>
</tbody></table>
<h2 id="scrape"><a class="header" href="#scrape">Scrape</a></h2>
<h3 id="request-2"><a class="header" href="#request-2">Request</a></h3>
<table><thead><tr><th>type</th><th>name</th></tr></thead><tbody>
<tr><td>i64</td><td>connection_id</td></tr>
<tr><td>i32</td><td>action</td></tr>
<tr><td>i32</td><td>transaction_id</td></tr>
</tbody></table>
<p><em>repeating:</em></p>
<table><thead><tr><th>type</th><th>name</th></tr></thead><tbody>
<tr><td>[i8; 20]</td><td>info_hash</td></tr>
</tbody></table>
<h3 id="response-2"><a class="header" href="#response-2">Response</a></h3>
<table><thead><tr><th>type</th><th>name</th></tr></thead><tbody>
<tr><td>i32</td><td>action</td></tr>
<tr><td>i32</td><td>transaction_id</td></tr>
</tbody></table>
<p><em>repeating:</em></p>
<table><thead><tr><th>type</th><th>name</th><th>description</th></tr></thead><tbody>
<tr><td>i32</td><td>complete</td><td>peers in swarm that have finished downloding</td></tr>
<tr><td>i32</td><td>downloaded</td><td>times torrent has been downloaded</td></tr>
<tr><td>i32</td><td>incomplete</td><td>peers that have not finished downloading</td></tr>
</tbody></table>
<h2 id="extensions"><a class="header" href="#extensions">Extensions</a></h2>
<p>The extensions field is a bitmask. The following bits are assigned:</p>
<table><thead><tr><th>name</th><th>bit</th></tr></thead><tbody>
<tr><td>authentication</td><td>1</td></tr>
<tr><td>request string</td><td>2</td></tr>
</tbody></table>
<p>If multiple bits are present in the extension field, the extension bodies are
appended to the packet in the order of least significant bit first. For
instance, if both bit 1 and 2 are set, the extension represented by bit 1 comes
first, followed by the extension represented by bit 2.</p>
<h3 id="authentication"><a class="header" href="#authentication">Authentication</a></h3>
<p>The packet will have authentication information appended to it.</p>
<p><code>passwd_hash</code> is the first eight bytes of <code>sha1(packet || sha1(password))</code>,
where <code>packet</code> is the bytes of the packet, less the final 8 bytes that are
<code>passwd_hash</code>.</p>
<table><thead><tr><th>type</th><th>name</th></tr></thead><tbody>
<tr><td>i8</td><td>username_length</td></tr>
<tr><td>[i8; <code>username_length</code></td><td>username</td></tr>
<tr><td>[u8; 8]</td><td>passwd_hash</td></tr>
</tbody></table>
<h3 id="request-string"><a class="header" href="#request-string">Request String</a></h3>
<p>The request string extension is meant to allow torrent creators pass along
cookies back to the tracker. This can be useful for authenticating that a
torrent is allowed to be tracked by a tracker for instance. It could also be
used to authenticate users by generating torrents with unique tokens in the
tracker URL for each user. The extension body has the following format:</p>
<table><thead><tr><th>type</th><th>name</th></tr></thead><tbody>
<tr><td>i8</td><td>request_length</td></tr>
<tr><td>[i8; <code>request_length</code>]</td><td>request_string</td></tr>
</tbody></table>
<p><code>request_string</code> is the string that comes after the hostname and port in the
UDP tracker URL. Typically this starts with “/announce” The bittorrent client
is not expected to append query string arguments for stats reporting, like
“uploaded” and “downloaded” since this is already reported in the UDP tracker
protocol. However, the client is free to add arguments as extensions.|</p>
<h2 id="credits"><a class="header" href="#credits">Credits</a></h2>
<p>Protocol designed by Olaf van der Spek and extended by Arvid Norberg</p>
<h1 id="references-1"><a class="header" href="#references-1">References</a></h1>
<p>This page intentionally left blank.</p>
<h1 id="bittorrent-1"><a class="header" href="#bittorrent-1">BitTorrent</a></h1>
<ul>
<li>
<p><a href="https://github.com/bittorrent/bittorrent.org">https://github.com/bittorrent/bittorrent.org</a> — GitHub repository hosting protocol development discussion and contents of bittorrent.org.</p>
</li>
<li>
<p><a href="https://www.bittorrent.org/">https://www.bittorrent.org/</a> — Official web site site hosting BEPs and other information about the protocol.</p>
</li>
<li>
<p><a href="https://wiki.theory.org/index.php/Main_Page">https://wiki.theory.org/index.php/Main_Page</a> — Wiki with lots of information about all aspects of the BitTorrent protocol and implementations.</p>
</li>
<li>
<p><a href="https://archive.org/details/2014_torrent_archive_organized">https://archive.org/details/2014_torrent_archive_organized)</a>) — Massive 158 GiB archive containing 5.5 million torrents, assembled in 2014.</p>
</li>
<li>
<p><a href="https://github.com/internetarchive/dweb-transport">https://github.com/internetarchive/dweb-transport</a> — Github repository hosting The Internet Archive’s distributed web and BitTorrent-related software.</p>
</li>
<li>
<p><a href="https://libtorrent.org/udp_tracker_protocol.html">https://libtorrent.org/udp_tracker_protocol.html</a> — UDP tracker protocol description.</p>
</li>
</ul>
<h1 id="metadata"><a class="header" href="#metadata">Metadata</a></h1>
<ul>
<li><a href="http://www.rssboard.org/media-rss">Media RSS Specification</a> — <em>Media RSS is a new RSS module that supplements the <enclosure> capabilities of RSS 2.0. RSS enclosures are already being used to syndicate audio files and images. Media RSS extends enclosures to handle other media types, such as short films or TV, as well as provide additional metadata with the media. Media RSS enables content publishers and bloggers to syndicate multimedia content such as TV and video clips, movies, images and audio.</em></li>
</ul>
<h1 id="cryptography"><a class="header" href="#cryptography">Cryptography</a></h1>
<ul>
<li>
<p><a href="https://ssbc.github.io/scuttlebutt-protocol-guide/">https://ssbc.github.io/scuttlebutt-protocol-guide/</a> — Secure Scuttlebutt Protocol guide</p>
</li>
<li>
<p><a href="https://github.com/lightningnetwork/lightning-rfc/blob/master/08-transport.md">https://github.com/lightningnetwork/lightning-rfc/blob/master/08-transport.md</a> — Lightning Network Encrypted and Authenticated Transport</p>
</li>
<li>
<p><a href="http://noiseprotocol.org/noise.html">http://noiseprotocol.org/noise.html</a> — Noise Protocol</p>
</li>
<li>
<p><a href="https://github.com/handshake-org/hsd/blob/master/lib/net/brontide.js">https://github.com/handshake-org/hsd/blob/master/lib/net/brontide.js</a> — Handshake P2P Encryption Protocol</p>
</li>
<li>
<p><a href="https://github.com/j01tz/grin-rfcs/blob/slate-serialization/text/0000-slate-serialization.md">https://github.com/j01tz/grin-rfcs/blob/slate-serialization/text/0000-slate-serialization.md</a> — Grin Slate Serialization</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
